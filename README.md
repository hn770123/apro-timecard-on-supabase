# 勤務月報システム

月間勤務時間の入力、チェック、集計、エクスポートを行うWebアプリケーションです。

## 技術スタック

- **フロントエンド**: HTML + JavaScript
- **バックエンド**: Supabase
- **ホスティング**: GitHub Pages

## 機能一覧

### 基本機能
- 月間勤務時間の入力
- 勤務パターンの設定（最大3パターン）
- 残業時間の自動計算
  - 通常残業
  - 深夜早朝残業（22:00～5:00）
  - 法定休日残業
  - 法定外休日残業
- 月間集計表示
- CSVエクスポート

### ユーザー管理
- ログイン認証
- ユーザー権限
  - 一般（入力者）
  - 承認者
  - システム管理者

### 承認機能
- 承認申請
- 承認/却下
- 承認取り消し
- 承認済みデータのロック

## セットアップ

### 1. Supabaseプロジェクトの作成

1. [Supabase](https://supabase.com/)でアカウントを作成
2. 新しいプロジェクトを作成
3. `docs/database-schema.sql`を使用してデータベースを構築

### 2. 設定ファイルの更新

`js/supabase-config.js`を編集し、Supabaseの接続情報を設定：

```javascript
const SUPABASE_URL = 'your-project-url';
const SUPABASE_ANON_KEY = 'your-anon-key';
```

### 3. GitHub Pagesへのデプロイ

1. リポジトリの設定からGitHub Pagesを有効化
2. ソースとして`main`ブランチを選択

## 使用方法

### ログイン

1. メールアドレスとパスワードを入力してログイン
2. 初期ユーザーはSupabaseのダッシュボードから作成

### 月間設定

1. 「月間設定」タブを選択
2. 氏名、所属を入力
3. 勤務パターンを設定（始業・終業時刻、休憩時間）
4. 1日標準就労時間を設定
5. 「設定を保存」をクリック

### 日毎の勤務入力

1. 「勤務入力」タブで日付の「編集」をクリック
2. 勤務の種類を選択
3. 出勤・退勤時刻を入力
4. 必要に応じて遅刻・早退・残業時間を調整
5. 「保存」をクリック

### 承認申請

1. 月間の勤務入力が完了したら「承認申請」をクリック
2. 承認者に通知が送信される

### 承認（承認者のみ）

1. 「承認管理」タブを選択
2. 承認待ちの申請を確認
3. 「承認」または「却下」をクリック

### ユーザー管理（管理者のみ）

1. 「ユーザー管理」タブを選択
2. ユーザーの追加・編集・削除が可能
3. 承認権限・管理者権限を設定

## ファイル構成

```
├── index.html          # ログインページ
├── dashboard.html      # ダッシュボード
├── css/
│   └── style.css       # スタイルシート
├── js/
│   ├── supabase-config.js  # Supabase設定
│   ├── auth.js             # 認証モジュール
│   ├── timecard.js         # 勤務時間管理モジュール
│   ├── admin.js            # 管理者モジュール
│   ├── approval.js         # 承認モジュール
│   └── app.js              # メインアプリケーション
├── docs/
│   ├── database-schema.sql # データベーススキーマ
│   ├── class-diagram.md    # クラス図
│   ├── sequence-diagram.md # シーケンス図
│   ├── activity-diagram.md # アクティビティ図
│   └── usecase-diagram.md  # ユースケース図
└── tests/
    └── timecard.test.js    # テストファイル
```

## ライセンス

MIT License
